<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}"
      th:with="title='Cambia password'">
  <div layout:fragment="content">
    <h1>Cambia password</h1>

    <form th:action="@{/profile/change-password}"
          th:object="${changePasswordForm}"
          method="post">
      <div class="mb-3">
        <label for="oldPassword" class="form-label">Password corrente</label>
        <input id="oldPassword" type="password" th:field="*{oldPassword}"
               class="form-control" required/>
        <div th:if="${#fields.hasErrors('oldPassword')}"
             class="text-danger"
             th:errors="*{oldPassword}">Errore</div>
      </div>

      <div class="mb-3">
        <label for="newPassword" class="form-label">Nuova password</label>
        <input id="newPassword" type="password" th:field="*{newPassword}"
               class="form-control" required/>
        <div th:if="${#fields.hasErrors('newPassword')}"
             class="text-danger"
             th:errors="*{newPassword}">Errore</div>
      </div>

      <button type="submit" class="btn btn-primary">Cambia password</button>
      <a th:href="@{/profile}" class="btn btn-link ms-2">Annulla</a>
    </form>

    <!-- Feedback -->
    <div th:if="${success}" class="alert alert-success mt-3" th:text="${success}"></div>
  </div>
</html>
